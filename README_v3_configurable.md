# å¯é…ç½®æ’è¡Œæ¦œåˆ†æç³»çµ± v3.0

## æ¦‚è¿°

é€™æ˜¯åŸå§‹ `profit_analysis_rolling_v2_(+1).py` çš„å‡ç´šç‰ˆæœ¬ï¼Œå°‡åŸæœ¬ç¡¬ç·¨ç¢¼çš„æ’è¡Œæ¦œè¨ˆç®—é‚è¼¯æ‹†åˆ†æˆä¸‰å€‹æ¨¡çµ„åŒ–çµ„ä»¶ï¼Œè®“ä½ å¯ä»¥è¼•é¬†å¯¦é©—ä¸åŒçš„æ’è¡Œæ¦œç­–ç•¥ã€‚

## ç³»çµ±æ¶æ§‹

### ğŸ“‹ 1. `ranking_config.py` - é…æ–¹æ›¸
- **ä½œç”¨**: å„²å­˜æ‰€æœ‰æ’è¡Œæ¦œç­–ç•¥çš„é…ç½®
- **å…§å®¹**: å®šç¾©æŒ‡æ¨™çµ„åˆã€æ¬Šé‡ã€æ¨™æº–åŒ–æ–¹å¼ç­‰
- **ä¿®æ”¹**: è¦æ¸¬è©¦æ–°ç­–ç•¥æ™‚ï¼Œåªéœ€åœ¨é€™è£¡æ·»åŠ æ–°é…ç½®

### ğŸ‘¨â€ğŸ³ 2. `ranking_engine.py` - è¨ˆç®—å¼•æ“  
- **ä½œç”¨**: æ ¹æ“šé…ç½®åŸ·è¡Œå¯¦éš›çš„æ’è¡Œæ¦œè¨ˆç®—
- **åŠŸèƒ½**: æ¨™æº–åŒ–ã€åŠ æ¬Šè¨ˆç®—ã€æ’åºç­‰æ ¸å¿ƒé‚è¼¯
- **ç‰¹è‰²**: æ”¯æ´æ³¢å‹•ç‡æ‡²ç½°ã€çµ„ä»¶åŒ–è¨ˆç®—

### ğŸª 3. `profit_analysis_rolling_v3_configurable.py` - ä¸»ç¨‹å¼
- **ä½œç”¨**: ç”¨æˆ¶äº¤äº’ã€æª”æ¡ˆè™•ç†ã€æµç¨‹å”èª¿
- **æ¨¡å¼**: åˆ†ææ¨¡å¼ã€æ¯”è¼ƒæ¨¡å¼ã€æ¸¬è©¦æ¨¡å¼
- **è¼¸å‡º**: åŒ…å«ç­–ç•¥åç¨±çš„ summary æª”æ¡ˆ

## å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´
```bash
pip install pandas numpy matplotlib requests
```

### 2. åŸ·è¡Œä¸»ç¨‹å¼
```bash
python profit_analysis_rolling_v3_configurable.py
```

### 3. é¸æ“‡æ¨¡å¼
```
ğŸš€ å¯é…ç½®æ’è¡Œæ¦œåˆ†æå·¥å…· v3.0
============================================================
é¸æ“‡æ¨¡å¼:
1. ğŸ“Š åˆ†ææ¨¡å¼ - ç”¢ç”Ÿæ–°çš„summaryæª”æ¡ˆ
2. ğŸ” æ¯”è¼ƒæ¨¡å¼ - æ¯”è¼ƒç¾æœ‰summaryçš„ä¸åŒç­–ç•¥çµæœ  
3. ğŸ§ª æ¸¬è©¦æ¨¡å¼ - äº¤äº’å¼ç­–ç•¥æ¸¬è©¦
4. ğŸ“‹ æŸ¥çœ‹å¯ç”¨ç­–ç•¥
```

## å…§å»ºç­–ç•¥

### ä¸»è¦ç­–ç•¥

1. **original** - åŸå§‹ç­–ç•¥
   - è¤‡è£½åŸæœ‰çš„è¨ˆç®—é‚è¼¯
   - é•·æœŸè©•åˆ† + çŸ­æœŸè©•åˆ†å„ä½” 50%

2. **momentum_focused** - å‹•é‡å°å‘ç­–ç•¥
   - é‡è¦–çŸ­æœŸè¡¨ç¾
   - çŸ­æœŸå‹•é‡ 70% + ä¸­æœŸå‹•é‡ 30%

3. **stability_focused** - ç©©å®šæ€§å°å‘ç­–ç•¥
   - é‡è¦–é•·æœŸç©©å®šæ€§
   - ç©©å®šæ€§ 60% + è¿‘æœŸè¡¨ç¾ 40%

4. **pure_short_term** - ç´”çŸ­æœŸç­–ç•¥
   - æ¥µåº¦é‡è¦– 1-2 å¤©è¡¨ç¾
   - 1å¤©è¡¨ç¾ 80% + 2å¤©è¡¨ç¾ 20%

5. **balanced** - å¹³è¡¡ç­–ç•¥
   - çŸ­ä¸­é•·æœŸå¹³è¡¡é…ç½®
   - çŸ­æœŸ 50% + ä¸­æœŸ 30% + é•·æœŸ 20%

6. **adaptive** - è‡ªé©æ‡‰ç­–ç•¥
   - åŒ…å«æ³¢å‹•ç‡æ‡²ç½°æ©Ÿåˆ¶
   - æ ¹æ“šæ³¢å‹•ç‡å‹•æ…‹èª¿æ•´åˆ†æ•¸

### å¯¦é©—ç­–ç•¥

- **test_1** - ç´”çŸ­æœŸæ¸¬è©¦
- **test_2** - é•·çŸ­æœŸå¹³è¡¡æ¸¬è©¦  
- **test_3** - åå‘æ¬Šé‡æ¸¬è©¦
- **test_4** - æ¥µç«¯å‹•é‡æ¸¬è©¦

## ä½¿ç”¨ç¯„ä¾‹

### 1. åˆ†ææ¨¡å¼
```bash
# åŸ·è¡Œç¨‹å¼å¾Œé¸æ“‡æ¨¡å¼ 1
# è¼¸å…¥æ—¥æœŸç¯„åœ: 2025-01-01 åˆ° 2025-01-31
# é¸æ“‡ç­–ç•¥: momentum_focused
# è‡ªå‹•ç”Ÿæˆ: summary_2025-01-31_strategy_momentum_focused_create_2025-06-XX(1).csv
```

### 2. æ¯”è¼ƒæ¨¡å¼
```bash
# åŸ·è¡Œç¨‹å¼å¾Œé¸æ“‡æ¨¡å¼ 2
# é¸æ“‡ç¾æœ‰ summary æª”æ¡ˆ
# è‡ªå‹•æ¯”è¼ƒ: original, momentum_focused, stability_focused, pure_short_term
# é¡¯ç¤ºå„ç­–ç•¥çš„å‰10åå·®ç•°
```

### 3. æ¸¬è©¦æ¨¡å¼
```bash
# åŸ·è¡Œç¨‹å¼å¾Œé¸æ“‡æ¨¡å¼ 3
# å¯ä»¥å‰µå»ºæ¸¬è©¦æ•¸æ“šæˆ–è¼‰å…¥ç¾æœ‰æ•¸æ“š
# äº¤äº’å¼æ¸¬è©¦å„ç¨®ç­–ç•¥çµ„åˆ
# æ”¯æ´ç­–ç•¥é‡ç–Šåˆ†æ
```

## è‡ªå®šç¾©ç­–ç•¥

### åœ¨ `ranking_config.py` ä¸­æ·»åŠ æ–°ç­–ç•¥ï¼š

```python
EXPERIMENTAL_CONFIGS['my_strategy'] = {
    'name': 'æˆ‘çš„ç­–ç•¥',
    'components': {
        'my_component': {
            'indicators': ['1d_ROI', '7d_ROI'],  # ä½¿ç”¨çš„æŒ‡æ¨™
            'weights': [0.8, 0.2],              # æ¬Šé‡
            'normalize': True                   # æ˜¯å¦æ¨™æº–åŒ–
        }
    },
    'final_combination': {
        'scores': ['my_component'],
        'weights': [1.0]
    }
}
```

### å¯ç”¨æŒ‡æ¨™ï¼š
- `1d_ROI`, `2d_ROI`, `7d_ROI`, `14d_ROI`, `30d_ROI`, `all_ROI` (å¹´åŒ–å ±é…¬ç‡)
- `1d_return`, `2d_return`, `7d_return`, `14d_return`, `30d_return`, `all_return` (ç´¯ç©å ±é…¬)

## é€²éšåŠŸèƒ½

### 1. æ³¢å‹•ç‡æ‡²ç½°
```python
'volatility_penalty': True  # åœ¨çµ„ä»¶é…ç½®ä¸­å•Ÿç”¨
```

### 2. ç­–ç•¥æ¯”è¼ƒ
```python
from ranking_engine import compare_strategies

# æ¯”è¼ƒå¤šå€‹ç­–ç•¥
strategies = ['original', 'momentum_focused', 'stability_focused']
compare_strategies(df, strategies, top_n=10)
```

### 3. é‡ç–Šåˆ†æ
```python
from ranking_engine import strategy_overlap_analysis

# åˆ†æç­–ç•¥é‡ç–Šåº¦
strategy_overlap_analysis(df, strategies, top_n=10)
```

### 4. èª¿è©¦æ¨¡å¼
```python
from ranking_engine import debug_strategy_calculation

# èª¿è©¦ç‰¹å®šç­–ç•¥çš„è¨ˆç®—éç¨‹
debug_strategy_calculation(df, 'momentum_focused', 'BTCUSDT_binance_bybit')
```

## è¼¸å‡ºæª”æ¡ˆæ ¼å¼

ç”Ÿæˆçš„ summary æª”æ¡ˆæœƒåŒ…å«ç­–ç•¥åç¨±ï¼š
```
summary_2025-01-31_strategy_momentum_focused_create_2025-06-XX(1).csv
```

æ–°å¢çš„æ¬„ä½ï¼š
- `final_ranking_score`: æœ€çµ‚æ’è¡Œæ¦œåˆ†æ•¸
- `{component_name}_score`: å„çµ„ä»¶åˆ†æ•¸
- ä¿ç•™åŸæœ‰æ¬„ä½ä»¥ä¿æŒå‘å¾Œå…¼å®¹

## æ•ˆèƒ½æ¯”è¼ƒ

### åŸç³»çµ± vs æ–°ç³»çµ±

| ç‰¹æ€§ | åŸç³»çµ± | æ–°ç³»çµ± |
|------|--------|--------|
| ç­–ç•¥æ•¸é‡ | 1å€‹å›ºå®š | 6å€‹ä¸»è¦ + 4å€‹å¯¦é©— |
| ä¿®æ”¹é›£åº¦ | éœ€æ”¹ç¨‹å¼ç¢¼ | åªéœ€æ”¹é…ç½® |
| æ¸¬è©¦æ•ˆç‡ | éœ€é‡æ–°é‹è¡Œ | äº¤äº’å¼æ¸¬è©¦ |
| æ“´å±•æ€§ | å›°é›£ | å®¹æ˜“ |
| é™¤éŒ¯èƒ½åŠ› | æœ‰é™ | å®Œæ•´é™¤éŒ¯å·¥å…· |

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **ModuleNotFoundError**: 
   ```bash
   pip install pandas numpy matplotlib requests
   ```

2. **æ‰¾ä¸åˆ° FR_diff æª”æ¡ˆ**:
   - ç¢ºä¿ `csv/FR_diff/` ç›®éŒ„å­˜åœ¨
   - æª¢æŸ¥æª”æ¡ˆå‘½åæ ¼å¼: `*_FR_diff.csv`

3. **ç­–ç•¥è¨ˆç®—å¤±æ•—**:
   - æª¢æŸ¥æ•¸æ“šæ˜¯å¦åŒ…å«å¿…è¦çš„ ROI æ¬„ä½
   - ä½¿ç”¨èª¿è©¦æ¨¡å¼æŸ¥çœ‹è©³ç´°éŒ¯èª¤

4. **ç„¡æ³•æ¯”è¼ƒç­–ç•¥**:
   - ç¢ºä¿ summary æª”æ¡ˆå­˜åœ¨æ–¼ `csv/FF_profit/summary/`
   - æª¢æŸ¥æª”æ¡ˆæ ¼å¼æ˜¯å¦æ­£ç¢º

## æ›´æ–°æ—¥èªŒ

### v3.0 (2025-06-XX)
- âœ… æ¨¡çµ„åŒ–è¨­è¨ˆï¼šé…ç½®ã€å¼•æ“ã€ä¸»ç¨‹å¼åˆ†é›¢
- âœ… 6å€‹ä¸»è¦ç­–ç•¥ + 4å€‹å¯¦é©—ç­–ç•¥
- âœ… äº¤äº’å¼æ¸¬è©¦æ¨¡å¼
- âœ… ç­–ç•¥æ¯”è¼ƒå’Œé‡ç–Šåˆ†æ
- âœ… å®Œæ•´çš„èª¿è©¦å·¥å…·
- âœ… å‘å¾Œå…¼å®¹åŸæœ‰åŠŸèƒ½

### v2.0 (åŸç‰ˆ)
- åŸºç¤çš„æ»¾å‹•åˆ†æåŠŸèƒ½
- å›ºå®šçš„Z-scoreè¨ˆç®—é‚è¼¯

## æŠ€è¡“æ”¯æ´

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹ï¼š
1. æª¢æŸ¥æœ¬æ–‡ä»¶çš„æ•…éšœæ’é™¤ç« ç¯€
2. ä½¿ç”¨ `python ranking_config.py` æ¸¬è©¦é…ç½®ç³»çµ±
3. ä½¿ç”¨æ¸¬è©¦æ¨¡å¼é€²è¡Œäº¤äº’å¼èª¿è©¦ 